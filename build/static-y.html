<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#1a202c" />
  <title>125 è¡Œä»£ç å®ç°ä¸€ä¸ªé™æ€åšå®¢ç”Ÿæˆå™¨</title>
  <link rel="icon" href="assets/favicon.ico" />
  <link rel="stylesheet" href="assets/index.css">
  <link href="assets/prism.css" rel="stylesheet" />
  <link href="assets/github-markdown.min.css" rel="stylesheet" />
</head>

<body>
  <header>
    <div class="header-container">
      <a href="/" class="ico-title">
        <img src="assets/favicon.ico" />
        <span>Y Lines</span>
      </a>
      <a href="https://feeds.pub/feed/https%3A%2F%2Fylines.org%2Frss.xml" class="follow-btn">
        Follow
      </a>
    </div>
  </header>

  <div class="hero">
    <h1 class="title padding">125 è¡Œä»£ç å®ç°ä¸€ä¸ªé™æ€åšå®¢ç”Ÿæˆå™¨</h1>
  </div>

  <div class="content-container">
    <div class="content">
      <div class="padding">
        <div class=" markdown-body line-numbers"><blockquote>
<p>è¿™ç¯‡æ–‡ç« æ¶‰åŠåˆ°çš„æ‰€æœ‰ä»£ç å¼€æºåœ¨ <a href="https://github.com/ylines/static-y">GitHub</a>. å‡è®¾è¯»è€…çŸ¥é“ä»€ä¹ˆæ˜¯ <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Markdown</a> æ ¼å¼, å¯¹ <a href="https://www.w3schools.com/html/default.asp">HTML</a>, <a href="https://www.w3schools.com/css/default.asp">CSS</a> å’Œ <a href="https://www.w3schools.com/js/default.asp">JavaScript</a> æœ‰ä¸€äº›äº†è§£.</p>
</blockquote>
<h2>ç®€ä»‹</h2>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•é€šè¿‡125è¡Œçš„ JavaScript, æ­é… CSS å’Œ HTML æ¥è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªåšå®¢ç”Ÿæˆå™¨. äº‹å®ä¸Š, ä½ ç°åœ¨æ‰€çœ‹åˆ°çš„è¿™ä¸ªç½‘ç«™å°±æ˜¯ç”¨è¿™ä¸ªå·¥å…·ç”Ÿæˆçš„.</p>
<h2>ç›®æ ‡</h2>
<p>è¯»å–ä¸€ä¸ªè£…ç€æ–‡ç« çš„æ–‡ä»¶å¤¹</p>
<pre><code>ğŸ“‚posts
 â”£ ğŸ“œabout.md
 â”— ğŸ“œstatic-y.md
</code></pre>
<p>ç”Ÿæˆä¸€ä¸ªå¯ä»¥éƒ¨ç½²åˆ° <a href="https://pages.github.com/">GitHub Pages</a> æˆ–è€…ä»»ä½•æœåŠ¡å™¨ä¸Šçš„é™æ€åšå®¢. ç”Ÿæˆçš„åšå®¢ç›®å½•å¤§æ¦‚é•¿ä¸‹é¢è¿™æ ·</p>
<pre><code>ğŸ“‚build
 â”£ ğŸ“‚assets         // èµ„æºæ–‡ä»¶å¤¹, æ”¾ä¸€äº›åšå®¢ç”¨åˆ°çš„å›¾ç‰‡, css, js æ–‡ä»¶
 â”£ ğŸ“œindex.html     // åšå®¢ä¸»é¡µ: æŒ‰æ—¶é—´é¡ºåºç´¢å¼•åšæ–‡
 â”£ ğŸ“œrss.xml        // RSS æ–‡ä»¶: ä¾›è¯»è€…è®¢é˜…
 â”£ ğŸ“œabout.html     // æ–‡ç« é¡µé¢: å…·ä½“çš„åšæ–‡
 â”— ğŸ“œstatic-y.html  // æ–‡ç« é¡µé¢: å…·ä½“çš„åšæ–‡
</code></pre>
<h2>æ€ä¹ˆåš</h2>
<h3>ç”¨åˆ°çš„å·¥å…·</h3>
<ul>
<li><a href="https://github.com/markdown-it/markdown-it">markdown-it</a>: markdown è½¬åŒ–æˆ HTML æ ¼å¼</li>
<li><a href="https://github.com/sindresorhus/github-markdown-css">github-markdown-css</a>: ç±»ä¼¼ GitHubæ–‡ç« çš„æ ·å¼</li>
<li><a href="https://github.com/jpmonette/feed">feed</a>: ç”Ÿæˆ RSS</li>
<li><a href="http://prismjs.com/">prism.js</a>: ç”¨äºä»£ç é«˜äº®</li>
<li><a href="https://github.com/substack/minimist">minimist</a>: è§£æä»å‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°</li>
<li><a href="https://github.com/pillys/copy-dir">copy-dir</a>: æ‹·è´æ•´ä¸ªæ–‡ä»¶å¤¹</li>
<li><a href="https://figma.com">Figma</a>: ç”¨äºè®¾è®¡ logo</li>
<li><a href="http://convertio.co/">convertio</a>: å›¾ç‰‡æ ¼å¼è½¬æ¢</li>
</ul>
<h3>ä»£ç ç»“æ„</h3>
<pre><code>ğŸ“œindex.js                        // è£…äº†ä¸»è¦é€»è¾‘
ğŸ“¦themes                          // ç”¨äºå­˜æ”¾ä¸åŒçš„ä¸»é¢˜, æ–¹ä¾¿åˆ‡æ¢å’Œè‡ªå®šä¹‰(ç›®å‰åªæœ‰ä¸€ä¸ªä¸»é¢˜, ä¹Ÿå°±æ˜¯ä½ ç°åœ¨çœ‹åˆ°çš„)
 â”— ğŸ“‚ylines.org                   // ä½ ç°åœ¨æ‰€çœ‹åˆ°çš„è¿™ä¸ªä¸»é¢˜
 â”ƒ â”£ ğŸ“‚assets                     // ä¸€äº›é™æ€èµ„æº, ä¼šè¢«ç›´æ¥å¤åˆ¶åˆ°ç”Ÿæˆçš„æ–‡ä»¶å¤¹ä¸­
 â”ƒ â”ƒ â”£ ğŸ“œfavicon.ico              // ç½‘ç«™çš„ favicon
 â”ƒ â”ƒ â”£ ğŸ“œgithub-markdown.min.css  // æŠŠæ–‡ç« å±•ç¤ºæˆç±»ä¼¼ github çš„ markdown æ ·å¼(æ–‡æœ«æœ‰æ¥æº)
 â”ƒ â”ƒ â”£ ğŸ“œindex.css                // ç”¨æˆ·è‡ªå®šä¹‰çš„æ ·å¼
 â”ƒ â”ƒ â”£ ğŸ“œprism.css                // ç”¨æ¥åšä»£ç é«˜äº®(æ–‡æœ«æœ‰æ¥æº)
 â”ƒ â”ƒ â”— ğŸ“œprism.js                 // ç”¨æ¥åšä»£ç é«˜äº®(æ–‡æœ«æœ‰æ¥æº)
 â”ƒ â”£ ğŸ“œindex.html                 // ç”¨äºç”Ÿæˆä¸»é¡µ, é€šè¿‡å¡å…¥åšæ–‡åˆ—è¡¨
 â”ƒ â”— ğŸ“œpost.html                  // ç”¨äºç”Ÿæˆåšæ–‡, é€šè¿‡å¡å…¥åšæ–‡æ ‡é¢˜, å†…å®¹, æ—¶é—´, ä½œè€…ç­‰
</code></pre>
<h3>ä¸»è¦æ­¥éª¤</h3>
<details>
<summary>1. ä» markdown ç”Ÿæˆæ–‡ç« é¡µé¢</summary>
<pre><code class="language-js">const fs = require('fs');
const path = require('path');
const copyDir = require('copy-dir');
const md = require('markdown-it')({
  html: true,
  linkify: true,
  typographer: true
});
const { Feed } = require('feed');
const argv = require('minimist')(process.argv.slice(2));

const {
  baseURL, title, description, fromPath, destPath, themePath,
} = argv;

if(!baseURL || !title || !fromPath || !destPath) {
  console.error('&quot;--baseURL&quot;, &quot;--title&quot;, &quot;--fromPath&quot;, &quot;--destPath&quot; is required');
  return;
}

// prepare paths
const postWrapperPath = path.join(themePath, 'post.html');
const indexWrapperPath = path.join(themePath, 'index.html');
const assetsPath = path.join(themePath, 'assets/');
const destAssetsPath = path.join(destPath, 'assets/');

// copy assets
copyDir.sync(assetsPath, destAssetsPath);

const postWrapper = fs.readFileSync(postWrapperPath, 'utf-8');

const blogPaths = fs.readdirSync(fromPath);

// generate posts and return posts info
const allPosts = blogPaths.map(mdFileName =&gt; {
  const fullPath = path.join(fromPath, mdFileName);
  const mdContent = fs.readFileSync(fullPath, 'utf-8');

  // TODO: robuster way to get title and date
  const contentArr = mdContent.split('\n');
  if (contentArr.length &lt; 4) {
    console.log('invalid file', mdFileName);
    return null;
  }
  const blogTitle = contentArr[1].slice(7).trim();
  const date = contentArr[2].slice(6).trim();
  const author = contentArr[3].slice(8).trim();
  const mdContentWithoutTitleDate = contentArr.slice(5).join('\n');

  const blogHTML = md.render(mdContentWithoutTitleDate);

  const resHTML = postWrapper
    .replace(/{{title}}/g, title)
    .replace(/{{blogTitle}}/g, blogTitle)
    .replace('{{createdDate}}', date)
    .replace('{{author}}', author)
    .replace('{{content}}', blogHTML)

  const htmlFileName = mdFileName.replace('.md', '.html');
  const destFilePath = path.join(destPath, htmlFileName);
  fs.writeFileSync(destFilePath, resHTML);

  return {
    htmlFileName,
    blogTitle,
    date,
    author
  }
})
.filter(post =&gt; !!post)
.sort((a, b) =&gt; {
  return new Date(b.date) - new Date(a.date);
});
</code></pre>
</details>
<details>
<summary>2. æ ¹æ®æ–‡ç« ç”Ÿæˆåšå®¢ä¸»é¡µ</summary>
<pre><code class="language-js">// Generate index.html
const indexWrapper = fs.readFileSync(indexWrapperPath, 'utf-8');

const postListHtml = allPosts.map(post =&gt; {
  const {
    htmlFileName,
    blogTitle,
    date,
    author
  } = post;

  return `
    &lt;div class=&quot;index-post-wrapper&quot;&gt;
      &lt;a class=&quot;index-post-title&quot; href=&quot;./${htmlFileName}&quot;&gt;${blogTitle}&lt;/a&gt;
      &lt;span class=&quot;date&quot;&gt;${date} by ${author}&lt;/span&gt;
    &lt;/div&gt;
  `;
}).join('')

const resIndexHTML = indexWrapper
  .replace(/{{title}}/g, title)
  .replace('{{blogList}}', postListHtml);

const destFilePath = path.join(destPath, 'index.html');
fs.writeFileSync(destFilePath, resIndexHTML);
</code></pre>
</details>
<details>
<summary>3. æ ¹æ®æ–‡ç« ç”Ÿæˆ RSS</summary>
<pre><code class="language-js">// Generate RSS
const feed = new Feed({
  title,
  description,
  link: baseURL,
});

allPosts.forEach(post =&gt; {
  const {
    htmlFileName,
    blogTitle,
    date,
  } = post;

  feed.addItem({
    title: blogTitle,
    date: new Date(date),
    link: `${baseURL}/${htmlFileName}`,
  })
});

const RSSXML = feed.rss2();
const destRSSPath = path.join(destPath, 'rss.xml');
fs.writeFileSync(destRSSPath, RSSXML);
</code></pre>
</details>
</div>
        <p class="date">2020-04-22 by timqian</p>
      </div>
    </div>
  </div>

  <script src="assets/prism.js"></script>
</body>

</html>